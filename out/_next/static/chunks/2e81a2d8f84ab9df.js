(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72517,e=>{"use strict";var r=e.i(85437);let t=(0,e.i(31344).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var s=e.i(17082);function l({isOpen:e,onClose:l,title:d,children:o,size:a="md"}){return((0,s.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),e)?(0,r.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:l,children:(0,r.jsxs)("div",{className:`relative w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[a]} bg-card border border-border rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto`,onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-card border-b border-border px-6 py-4 flex items-center justify-between z-10",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-foreground",children:d}),(0,r.jsx)("button",{onClick:l,className:"p-2 hover:bg-secondary rounded-lg text-muted-foreground hover:text-foreground transition-colors",children:(0,r.jsx)(t,{className:"h-5 w-5"})})]}),(0,r.jsx)("div",{className:"p-6",children:o})]})}):null}e.s(["default",()=>l],72517)},24665,e=>{"use strict";let r=(0,e.i(31344).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>r],24665)},67704,e=>{"use strict";var r=e.i(85437),t=e.i(20942),s=e.i(58099),l=e.i(24665),d=e.i(17082),o=e.i(72517),a=e.i(88314);e.i(36180);var i=e.i(98925);function c(){let[e,c]=(0,d.useState)([]),[n,x]=(0,d.useState)([]),[m,u]=(0,d.useState)(!0),[h,p]=(0,d.useState)(!1),[b,f]=(0,d.useState)(null);(0,d.useEffect)(()=>{let e=(0,i.query)((0,i.collection)(a.db,"logs"),(0,i.orderBy)("date","desc")),r=(0,i.onSnapshot)(e,e=>{let r={};e.forEach(e=>{let t=e.data();r[t.car]||(r[t.car]={...t,id:e.id})});let t={},s=[];Object.values(r).forEach(e=>{let{building:r,detail:l}=(e=>{if(!e)return{building:"미지정",detail:"-"};for(let r of["본사 (파미어스몰)"])if(e.startsWith(r)&&e===r)return{building:r,detail:"-"};let r=e.lastIndexOf(" (");if(r>-1&&e.endsWith(")")){let t=e.substring(0,r),s=e.substring(r+2,e.length-1);return"본사 (파미어스몰)"===e?{building:e,detail:"-"}:{building:t,detail:s}}return{building:e,detail:"-"}})(e.parking);s.push({car:e.car,location:`${r} ${l}`,time:e.date,driver:e.driver,photo:e.hasPhoto,photoUrl:e.photoUrl}),t[r]||(t[r]=[]),t[r].push({id:l,status:"occupied",car:e.car,time:e.date,driver:e.driver,photoUrl:e.photoUrl})}),c(Object.keys(t).map(e=>({name:e,spots:t[e]}))),x(s),u(!1)});return()=>r()},[]);let g=e=>{e&&(f(e),p(!0))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"차량주차위치"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mt-1",children:"각 차량의 현재 주차 위치를 확인합니다."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-secondary border border-border rounded-full text-xs text-muted-foreground",children:[(0,r.jsx)(l.AlertCircle,{className:"h-3 w-3"}),(0,r.jsx)("span",{children:"운행 기록에 따라 자동으로 업데이트됩니다."})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,r.jsx)("div",{className:"space-y-6",children:0===e.length?(0,r.jsx)("div",{className:"glass-card rounded-xl p-10 border border-border text-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"주차된 차량 정보가 없습니다."})}):e.map(e=>(0,r.jsxs)("div",{className:"glass-card rounded-xl p-6 border border-border",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-foreground mb-6 flex items-center gap-2",children:[(0,r.jsx)(t.MapPin,{className:"h-5 w-5 text-primary"}),e.name]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:e.spots.map((e,t)=>(0,r.jsxs)("div",{onClick:()=>e.photoUrl&&g(e.photoUrl),className:`relative aspect-[4/3] rounded-2xl border flex flex-col items-center justify-center p-4 text-center shadow-xl transition-all duration-300 hover:scale-[1.02] overflow-hidden group ${e.photoUrl?"border-primary/50 cursor-pointer hover:shadow-primary/20":"bg-primary/10 border-primary/30 shadow-primary/5"}`,children:[e.photoUrl&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-500 group-hover:scale-110",style:{backgroundImage:`url(${e.photoUrl})`}}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-black/20"})]}),(0,r.jsxs)("div",{className:"relative z-10 flex flex-col items-center justify-center w-full h-full",children:[(0,r.jsx)("span",{className:`absolute top-0 left-0 text-xs font-black tracking-tighter ${e.photoUrl?"text-white/80":"text-muted-foreground/60"}`,children:"-"===e.id?"미지정":e.id}),!e.photoUrl&&(0,r.jsx)(s.Car,{className:"h-12 w-12 text-primary mb-3 drop-shadow-md"}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1 w-full",children:[(0,r.jsx)("p",{className:`text-2xl font-black truncate w-full mb-1 ${e.photoUrl?"text-white drop-shadow-lg":"text-foreground"}`,children:e.car?.split(" ")[0]}),(0,r.jsx)("p",{className:`text-sm truncate w-full tracking-tighter mb-4 ${e.photoUrl?"text-white/80 drop-shadow-md":"text-muted-foreground"}`,children:e.car?.split(" ")[1]})]}),(0,r.jsxs)("div",{className:"mt-auto flex items-center gap-2 w-full justify-center",children:[(0,r.jsx)("div",{className:`px-2 py-1 rounded text-[10px] font-bold ${e.photoUrl?"bg-black/50 text-white border border-white/20 backdrop-blur-sm":"bg-primary/20 text-primary"}`,children:e.time}),(0,r.jsx)("div",{className:`px-2 py-1 rounded text-[10px] font-bold border ${e.photoUrl?"bg-black/50 text-white/90 border-white/20 backdrop-blur-sm":"bg-secondary text-muted-foreground border-border"}`,children:e.driver})]})]})]},`${e.id}-${t}`))})]},e.name))}),(0,r.jsxs)("div",{className:"glass-card rounded-xl p-0 overflow-hidden border border-border h-fit",children:[(0,r.jsx)("div",{className:"p-4 border-b border-border bg-secondary/30",children:(0,r.jsx)("h3",{className:"font-semibold text-foreground",children:"차량별 위치 목록"})}),(0,r.jsx)("div",{className:"divide-y divide-border",children:0===n.length?(0,r.jsx)("div",{className:"p-4 text-center text-xs text-muted-foreground",children:"기록 없음"}):n.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 hover:bg-secondary/30 transition-colors flex items-center gap-4",children:[e.photoUrl?(0,r.jsx)("div",{className:"h-12 w-16 rounded-lg bg-cover bg-center shrink-0 border border-border cursor-pointer hover:opacity-80 transition-opacity",style:{backgroundImage:`url(${e.photoUrl})`},onClick:()=>g(e.photoUrl)}):(0,r.jsx)("div",{className:"h-12 w-16 rounded-lg bg-secondary/50 flex items-center justify-center shrink-0 border border-border",children:(0,r.jsx)(s.Car,{className:"h-6 w-6 text-muted-foreground/30"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("span",{className:"font-medium text-foreground text-sm",children:e.car.split(" ")[0]}),(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-primary/10 text-primary border border-primary/20",children:e.location})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:e.car.split(" ")[1]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,r.jsx)("span",{children:e.time}),(0,r.jsx)("span",{className:"w-0.5 h-2 bg-border"}),(0,r.jsx)("span",{children:e.driver})]})]})]},t))})]})]}),(0,r.jsxs)(o.default,{isOpen:h,onClose:()=>p(!1),title:"주차 위치 사진",size:"md",children:[(0,r.jsx)("div",{className:"flex items-center justify-center p-2",children:b?(0,r.jsx)("img",{src:b,alt:"Parking Location",className:"max-w-full h-auto rounded-lg shadow-2xl"}):(0,r.jsx)("p",{className:"text-muted-foreground",children:"사진이 없습니다."})}),(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:(0,r.jsx)("button",{onClick:()=>p(!1),className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg font-medium",children:"닫기"})})]})]})}e.s(["default",()=>c])}]);